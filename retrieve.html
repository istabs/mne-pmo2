<!DOCTYPE HTML>
<html>

<head>
	<title>
		MNE-PMO Gantts
	</title>
	<link type="text/css" rel="stylesheet" href="styles.css">
</head>

<script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/firebasejs/8.1.1/firebase-database.js"></script>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.20/lodash.min.js"
integrity="sha512-90vH1Z83AJY9DmlWa8WkjkV79yfS2n2Oxhsi2dZbIv0nC4E6m5AbH8Nh156kkM7JePmqD6tcZsfad1ueoaovww=="
crossorigin="anonymous">
</script>

<script type="text/javascript" src="configuration.js"></script>
<script type="text/javascript">
	firebase.initializeApp(firebaseConfig);
</script>

<script type="text/javascript" src="setup.js"></script>
<script type="text/javascript" src="adapters.js"></script>
<script type="text/javascript" src="presenter.js"></script>

<script type="text/javascript">

	var baseUrl = ''
//	var baseUrl = 'https://api.airtable.com/v0/' + 'appWkcknvBGRx31f8'
	var setup = getSetup(baseUrl);

	function fromMenu(choice) {
		target=setup[choice];
		resetChart('ganttCharts');
	}

	function setMenu (ganttTag) {
		fbCache((ganttTag) => {
			baseUrl = 'https://api.airtable.com/v0/' + projectKey;
			setup = getSetup(baseUrl);
			var links = "";
			Object.entries(setup).forEach(item => {
				links +="<a class='menuItems' onclick=\"fromMenu('" + item[0] + "')\" href=\"#\">" + item[1].title + "</a>"
			});
			document.getElementById(ganttTag).innerHTML = links
		}, ganttTag);
	}

	document.addEventListener("DOMContentLoaded", event => resetChart("ganttCharts"));

	//var target = setup.contratacao;
</script>

<script type="text/javascript" src="setup.js"></script>

<script type="text/javascript">
	var target = setup.contratacao;		
	resetChart('ganttCharts')
</script>

<script>
	/* When the user clicks on the button,
	toggle between hiding and showing the dropdown content */
	function menuToggle() {
		document.getElementById("ganttCharts").classList.toggle("show");
	}
	
	// Close the dropdown menu if the user clicks outside of it
	window.onclick = function(event) {
		if (!event.target.matches('.dropbtn')) {
			var dropdowns = document.getElementsByClassName("dropdown-content");
			var i;
			for (i = 0; i < dropdowns.length; i++) {
				var openDropdown = dropdowns[i];
				if (openDropdown.classList.contains('show')) {
					openDropdown.classList.remove('show');
				}
			}
		}
	}
</script>

<body>

	<h1><div id="chart_title_div"></div></h1>
    <div class="dropdown">
        <button onclick="menuToggle()" class="dropbtn">Seleção de Gantt</button>
        <div id="ganttCharts" class="dropdown-content"></div>
    </div>      
    <button class="resetbtn" onclick="resetChart('ganttCharts')">Reset</button>
    <div id="chart_div"></div>

</body>

</html>