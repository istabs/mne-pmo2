<!DOCTYPE HTML>
<html>

<head>
	<title>
		Firebase access.
	</title>

	<script src="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.js"></script>
	<link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.6.1/firebase-ui-auth.css" />

</head>

<!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->
<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
<!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>
<!-- Add Firebase products that you want to use -->
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>
<!-- Previously loaded Firebase SDKs -->

<script>
	// TODO: Replace the following with your app's Firebase project configuration
	// For Firebase JavaScript SDK v7.20.0 and later, `measurementId` is an optional field
	// For Firebase JS SDK v7.20.0 and later, measurementId is optional
	const firebaseConfig = {
		apiKey: "AIzaSyBLno126jESgr7JzuOADmImv1D0EkBkfNI",
		authDomain: "mne-pmo.firebaseapp.com",
		databaseURL: "https://mne-pmo-default-rtdb.europe-west1.firebasedatabase.app/",
		projectId: "mne-pmo",
		storageBucket: "mne-pmo.appspot.com",
		messagingSenderId: "1027876211335",
		appId: "1:1027876211335:web:98ee15cb97dc0298134622",
		measurementId: "G-7X7SYD20HZ"
	};
</script>

<script>
	// Initialize Firebase
	firebase.initializeApp(firebaseConfig);
	//var provider = new firebase.auth.GoogleAuthProvider();
	//firebase.auth().signInWithRedirect(provider);
	//firebase.auth().signInWithPopup(provider).then(function (result) {
	//	// This gives you a Google Access Token. You can use it to access the Google API.
	//	var token = result.credential.accessToken;
	//	// The signed-in user info.
	//	var user = result.user;
	//	console.log("success")
	//	// ...
	//}).catch(function (error) {
	//	// Handle Errors here.
	//	var errorCode = error.code;
	//	var errorMessage = error.message;
	//	// The email of the user's account used.
	//	var email = error.email;
	//	// The firebase.auth.AuthCredential type that was used.
	//	var credential = error.credential;
	//	// ...
	//	console.log("error: " + error.message)
	//});
</script>

<script>
	var ui = new firebaseui.auth.AuthUI(firebase.auth());
	ui.start('#firebaseui-auth-container', {
		signInOptions: [{
				provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,
				signInMethod: firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD,
				forceSameDevice: false,
				requireDisplayName: false,
			},
			// List of OAuth providers supported.
			{
				provider: firebase.auth.GoogleAuthProvider.PROVIDER_ID,
				//scopes: [
				//	'https://www.googleapis.com/auth/contacts.readonly'
				//],
				customParameters: {
					// Forces account selection even when one account
					// is available.
					prompt: 'select_account'
				},
			},
			firebase.auth.FacebookAuthProvider.PROVIDER_ID,
			firebase.auth.TwitterAuthProvider.PROVIDER_ID,
			firebase.auth.GithubAuthProvider.PROVIDER_ID
		],
		// Other config options...
	});
</script>

<script>
	initApp = function () {
		firebase.auth().onAuthStateChanged(function (user) {
			if (user) {
				// User is signed in.
				var displayName = user.displayName;
				var email = user.email;
				var emailVerified = user.emailVerified;
				var photoURL = user.photoURL;
				var uid = user.uid;
				var phoneNumber = user.phoneNumber;
				var providerData = user.providerData;
				user.getIdToken().then(function (accessToken) {
					document.getElementById('sign-in-status').textContent = 'Signed in';
					document.getElementById('sign-in').textContent = 'Sign out';
					document.getElementById('account-details').textContent = JSON.stringify({
						displayName: displayName,
						email: email,
						emailVerified: emailVerified,
						phoneNumber: phoneNumber,
						photoURL: photoURL,
						uid: uid,
						accessToken: accessToken,
						providerData: providerData
					}, null, '  ');
				});
			} else {
				// User is signed out.
				document.getElementById('sign-in-status').textContent = 'Signed out';
				document.getElementById('sign-in').textContent = 'Sign in';
				document.getElementById('account-details').textContent = 'null';
			}
		}, function (error) {
			console.log(error);
		});
	};

	window.addEventListener('load', () => initApp());
</script>

<!-- <script>
	// Initialize Firebase
	firebase.initializeApp(firebaseConfig);
	var provider = new firebase.auth.GoogleAuthProvider();
	firebase.auth().signInWithRedirect(provider);
	firebase.auth().signInWithPopup(provider).then(function (result) {
		// This gives you a Google Access Token. You can use it to access the Google API.
		var token = result.credential.accessToken;
		// The signed-in user info.
		var user = result.user;
		console.log("success")
		// ...
	}).catch(function (error) {
		// Handle Errors here.
		var errorCode = error.code;
		var errorMessage = error.message;
		// The email of the user's account used.
		var email = error.email;
		// The firebase.auth.AuthCredential type that was used.
		var credential = error.credential;
		// ...
		console.log("error: " + error.message)
	});

	firebase.auth().getRedirectResult().then(function (result) {
		if (result.credential) {
			// This gives you a Google Access Token. You can use it to access the Google API.
			var token = result.credential.accessToken;
			// ...
		}
		// The signed-in user info.
		var user = result.user;
		console.log("success")
	}).catch(function (error) {
		// Handle Errors here.
		var errorCode = error.code;
		var errorMessage = error.message;
		// The email of the user's account used.
		var email = error.email;
		// The firebase.auth.AuthCredential type that was used.
		var credential = error.credential;
		// ...
		console.log("error: " + error.message)
	});

	var bigOne = document.getElementById('bigOne');
	var dbRef = firebase.database().ref("/mne-pmo");
	//dbRef.on('value', snap => bigOne.innerText = snap.val());
	dbRef.on('value', snap => console.log("result: " + snap.val()));
</script> -->

<body>

	<h1>Hello</h1>
	<div id="bigOne"></div>
	<div id="firebaseui-auth-container"></div>
	<div id="loader">Loading...</div>
	<div id="sign-in-status"></div>
	<div id="sign-in"></div>
	<pre id="account-details"></pre>

</body>


</html>